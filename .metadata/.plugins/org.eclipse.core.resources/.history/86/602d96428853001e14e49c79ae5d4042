import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.lang.invoke.ClassSpecializer.Factory;
import java.util.Set;

import org.testng.annotations.Test;

import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;
//import com.fasterxml.jackson.databind.jsonschema.JsonSchema;
import com.networknt.schema.JsonSchemaFactory;
import com.networknt.schema.SpecVersion.VersionFlag;
import com.networknt.schema.*;
public class JsonValidation {

	@Test
	public void NtJsonValidation()
	{
		ObjectMapper mapper = new ObjectMapper();
		JsonSchemaFactory.factory1 = JsonSchemaFactory.getInstance(VersionFlag.V4);
		File InputJson = new File("src/test/resource/Input.json");
		InputStream inputSchema = new FileInputStream("src/test/resouce/schema.json");
		JsonNode jsonnode = mapper.readTree(InputJson);
		JsonSchema schema = factory1.getSchema(inputSchema);
		
		Set<ValidationMessage> result = schema.validate(jsonnode);
		if(result.isEmpty())
		{
			System.out.println("No validation error");
		}
		else
		{
			for (ValidationMessage message:result)
			{
				System.out.println(message);
			}
		}
		
	}

}
